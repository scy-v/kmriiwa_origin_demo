<launch>

  <!-- <arg name="map_file" default="$(find kmriiwa_navigation)/maps/dryLab.yaml" /> -->
  <arg name="map_file" default="$(find kmriiwa_navigation)/maps/dryLab.yaml" />
  <arg name="base_global_planner" default="navfn/NavfnROS"/>
  <arg name="base_local_planner" default="teb_local_planner/TebLocalPlannerROS" />
  <arg name="rviz" default="false"/>
  <arg name="use_namespace" default="true" />
  <arg name="robot_name" default="kmriiwa" />

  <group ns="$(eval robot_name if use_namespace == 1 else '/')">
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />

    <include file="$(find kmriiwa_navigation)/launch/amcl.launch">
      <arg name="robot_name" value="$(arg robot_name)" />
    </include>

    <include file="$(find kmriiwa_vis)/launch/navigation_view.launch" if="$(arg rviz)">
      <arg name="no_static_map" value="false" />
    </include>
  </group>

  <include file="$(find kmriiwa_navigation)/launch/move_base.launch" >
    <arg name="use_namespace" value="$(arg use_namespace)" />
    <arg name="robot_name" value="$(arg robot_name)" />
    <arg name="no_static_map" value="false" />
    <arg name="base_global_planner" value="$(arg base_global_planner)"/>
    <arg name="base_local_planner" value="$(arg base_local_planner)" />
  </include>

</launch> 